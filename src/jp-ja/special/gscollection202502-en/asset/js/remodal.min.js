/*
 *  Remodal - v1.0.5
 *  Responsive, lightweight, fast, synchronized with CSS animations, fully customizable modal window plugin with declarative configuration and hash tracking.
 *  http://vodkabears.github.io/remodal/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */

!(function (a, b) {
  typeof define === "function" && define.amd
    ? define(["jquery"], function (c) {
        return b(a, c);
      })
    : typeof exports === "object"
      ? b(a, require("jquery"))
      : b(a, a.jQuery || a.Zepto);
})(this, function (a, b) {
  "use strict";
  function c(a) {
    if (
      w &&
      a.css("animation-name") === "none" &&
      a.css("-webkit-animation-name") === "none" &&
      a.css("-moz-animation-name") === "none" &&
      a.css("-o-animation-name") === "none" &&
      a.css("-ms-animation-name") === "none"
    )
      return 0;
    let b;
    let c;
    let d;
    let e;
    let f =
      a.css("animation-duration") ||
      a.css("-webkit-animation-duration") ||
      a.css("-moz-animation-duration") ||
      a.css("-o-animation-duration") ||
      a.css("-ms-animation-duration") ||
      "0s";
    let g = a.css("animation-delay") || a.css("-webkit-animation-delay") || a.css("-moz-animation-delay") || a.css("-o-animation-delay") || a.css("-ms-animation-delay") || "0s";
    let h =
      a.css("animation-iteration-count") ||
      a.css("-webkit-animation-iteration-count") ||
      a.css("-moz-animation-iteration-count") ||
      a.css("-o-animation-iteration-count") ||
      a.css("-ms-animation-iteration-count") ||
      "1";
    for (f = f.split(", "), g = g.split(", "), h = h.split(", "), e = 0, c = f.length, b = Number.NEGATIVE_INFINITY; c > e; e++)
      (d = parseFloat(f[e]) * parseInt(h[e], 10) + parseFloat(g[e])), d > b && (b = d);
    return d;
  }
  function d() {
    if (b(document.body).height() <= b(window).height()) return 0;
    let a;
    let c;
    const d = document.createElement("div");
    const e = document.createElement("div");
    return (
      (d.style.visibility = "hidden"),
      (d.style.width = "100px"),
      document.body.appendChild(d),
      (a = d.offsetWidth),
      (d.style.overflow = "scroll"),
      (e.style.width = "100%"),
      d.appendChild(e),
      (c = e.offsetWidth),
      d.parentNode.removeChild(d),
      a - c
    );
  }
  function e() {
    if (!x) {
      let a;
      let c;
      const e = b("html");
      const f = k("is-locked");
      e.hasClass(f) || ((c = b(document.body)), (a = parseInt(c.css("padding-right"), 10) + d()), c.css("padding-right", a + "px"), e.addClass(f));
    }
  }
  function f() {
    if (!x) {
      let a;
      let c;
      const e = b("html");
      const f = k("is-locked");
      e.hasClass(f) && ((c = b(document.body)), (a = parseInt(c.css("padding-right"), 10) - d()), c.css("padding-right", a + "px"), e.removeClass(f));
    }
  }
  function g(a, b, c, d) {
    const e = k("is", b);
    const f = [k("is", u.CLOSING), k("is", u.OPENING), k("is", u.CLOSED), k("is", u.OPENED)].join(" ");
    a.$bg.removeClass(f).addClass(e),
      a.$overlay.removeClass(f).addClass(e),
      a.$wrapper.removeClass(f).addClass(e),
      a.$modal.removeClass(f).addClass(e),
      (a.state = b),
      !c && a.$modal.trigger({ type: b, reason: d }, [{ reason: d }]);
  }
  function h(a, d, e) {
    let f = 0;
    const g = function (a) {
      a.target === this && f++;
    };
    const h = function (a) {
      a.target === this &&
        --f === 0 &&
        (b.each(["$bg", "$overlay", "$wrapper", "$modal"], function (a, b) {
          e[b].off(r + " " + s);
        }),
        d());
    };
    b.each(["$bg", "$overlay", "$wrapper", "$modal"], function (a, b) {
      e[b].on(r, g).on(s, h);
    }),
      a(),
      c(e.$bg) === 0 &&
        c(e.$overlay) === 0 &&
        c(e.$wrapper) === 0 &&
        c(e.$modal) === 0 &&
        (b.each(["$bg", "$overlay", "$wrapper", "$modal"], function (a, b) {
          e[b].off(r + " " + s);
        }),
        d());
  }
  function i(a) {
    a.state !== u.CLOSED &&
      (b.each(["$bg", "$overlay", "$wrapper", "$modal"], function (b, c) {
        a[c].off(r + " " + s);
      }),
      a.$bg.removeClass(a.settings.modifier),
      a.$overlay.removeClass(a.settings.modifier).hide(),
      a.$wrapper.hide(),
      f(),
      g(a, u.CLOSED, !0));
  }
  function j(a) {
    let b;
    let c;
    let d;
    let e;
    const f = {};
    for (a = a.replace(/\s*:\s*/g, ":").replace(/\s*,\s*/g, ","), b = a.split(","), e = 0, c = b.length; c > e; e++)
      (b[e] = b[e].split(":")),
        (d = b[e][1]),
        (typeof d === "string" || d instanceof String) && (d = d === "true" || (d === "false" ? !1 : d)),
        (typeof d === "string" || d instanceof String) && (d = isNaN(d) ? d : +d),
        (f[b[e][0]] = d);
    return f;
  }
  function k() {
    for (var a = q, b = 0; b < arguments.length; ++b) a += "-" + arguments[b];
    return a;
  }
  function l() {
    let a;
    let c;
    const d = location.hash.replace("#", "");
    if (d) {
      try {
        c = b("[data-" + p + '-id="' + d + '"]');
      } catch (e) {}
      c && c.length && ((a = b[p].lookup[c.data(p)]), a && a.settings.hashTracking && a.open());
    } else n && n.state === u.OPENED && n.settings.hashTracking && n.close();
  }
  function m(a, c) {
    const d = b(document.body);
    const e = this;
    (e.settings = b.extend({}, t, c)),
      (e.index = b[p].lookup.push(e) - 1),
      (e.state = u.CLOSED),
      (e.$overlay = b("." + k("overlay"))),
      e.$overlay.length ||
        ((e.$overlay = b("<div>")
          .addClass(k("overlay") + " " + k("is", u.CLOSED))
          .hide()),
        d.append(e.$overlay)),
      (e.$bg = b("." + k("bg")).addClass(k("is", u.CLOSED))),
      (e.$modal = a.addClass(q + " " + k("is-initialized") + " " + e.settings.modifier + " " + k("is", u.CLOSED)).attr("tabindex", "-1")),
      (e.$wrapper = b("<div>")
        .addClass(k("wrapper") + " " + e.settings.modifier + " " + k("is", u.CLOSED))
        .hide()
        .append(e.$modal)),
      d.append(e.$wrapper),
      e.$wrapper.on("click." + q, "[data-" + p + '-action="close"]', function (a) {
        a.preventDefault(), e.close();
      }),
      e.$wrapper.on("click." + q, "[data-" + p + '-action="cancel"]', function (a) {
        a.preventDefault(), e.$modal.trigger(v.CANCELLATION), e.settings.closeOnCancel && e.close(v.CANCELLATION);
      }),
      e.$wrapper.on("click." + q, "[data-" + p + '-action="confirm"]', function (a) {
        a.preventDefault(), e.$modal.trigger(v.CONFIRMATION), e.settings.closeOnConfirm && e.close(v.CONFIRMATION);
      }),
      e.$wrapper.on("click." + q, function (a) {
        const c = b(a.target);
        c.hasClass(k("wrapper")) && e.settings.closeOnOutsideClick && e.close();
      });
  }
  let n;
  let o;
  var p = "remodal";
  var q = (a.REMODAL_GLOBALS && a.REMODAL_GLOBALS.NAMESPACE) || p;
  var r = b
    .map(["animationstart", "webkitAnimationStart", "MSAnimationStart", "oAnimationStart"], function (a) {
      return a + "." + q;
    })
    .join(" ");
  var s = b
    .map(["animationend", "webkitAnimationEnd", "MSAnimationEnd", "oAnimationEnd"], function (a) {
      return a + "." + q;
    })
    .join(" ");
  var t = b.extend(
    { hashTracking: !0, closeOnConfirm: !0, closeOnCancel: !0, closeOnEscape: !0, closeOnOutsideClick: !0, modifier: "" },
    a.REMODAL_GLOBALS && a.REMODAL_GLOBALS.DEFAULTS
  );
  var u = { CLOSING: "closing", CLOSED: "closed", OPENING: "opening", OPENED: "opened" };
  var v = { CONFIRMATION: "confirmation", CANCELLATION: "cancellation" };
  var w = (function () {
    const a = document.createElement("div").style;
    return void 0 !== a.animationName || void 0 !== a.WebkitAnimationName || void 0 !== a.MozAnimationName || void 0 !== a.msAnimationName || void 0 !== a.OAnimationName;
  })();
  var x = /iPad|iPhone|iPod/.test(navigator.platform);
  (m.prototype.open = function () {
    let a;
    const c = this;
    c.state !== u.OPENING &&
      c.state !== u.CLOSING &&
      ((a = c.$modal.attr("data-" + p + "-id")),
      a && c.settings.hashTracking && ((o = b(window).scrollTop()), (location.hash = a)),
      n && n !== c && i(n),
      (n = c),
      e(),
      c.$bg.addClass(c.settings.modifier),
      c.$overlay.addClass(c.settings.modifier).show(),
      c.$wrapper.show().scrollTop(0),
      c.$modal.focus(),
      h(
        function () {
          g(c, u.OPENING);
        },
        function () {
          g(c, u.OPENED);
        },
        c
      ));
  }),
    (m.prototype.close = function (a) {
      const c = this;
      c.state !== u.OPENING &&
        c.state !== u.CLOSING &&
        (c.settings.hashTracking && c.$modal.attr("data-" + p + "-id") === location.hash.substr(1) && ((location.hash = ""), b(window).scrollTop(o)),
        h(
          function () {
            g(c, u.CLOSING, !1, a);
          },
          function () {
            c.$bg.removeClass(c.settings.modifier), c.$overlay.removeClass(c.settings.modifier).hide(), c.$wrapper.hide(), f(), g(c, u.CLOSED, !1, a);
          },
          c
        ));
    }),
    (m.prototype.getState = function () {
      return this.state;
    }),
    (m.prototype.destroy = function () {
      let a;
      const c = b[p].lookup;
      i(this),
        this.$wrapper.remove(),
        delete c[this.index],
        (a = b.grep(c, function (a) {
          return !!a;
        }).length),
        a === 0 && (this.$overlay.remove(), this.$bg.removeClass(k("is", u.CLOSING) + " " + k("is", u.OPENING) + " " + k("is", u.CLOSED) + " " + k("is", u.OPENED)));
    }),
    (b[p] = { lookup: [] }),
    (b.fn[p] = function (a) {
      let c, d;
      return (
        this.each(function (e, f) {
          (d = b(f)),
            d.data(p) == null
              ? ((c = new m(d, a)), d.data(p, c.index), c.settings.hashTracking && d.attr("data-" + p + "-id") === location.hash.substr(1) && c.open())
              : (c = b[p].lookup[d.data(p)]);
        }),
        c
      );
    }),
    b(document).ready(function () {
      b(document).on("click", "[data-" + p + "-target]", function (a) {
        a.preventDefault();
        const c = a.currentTarget;
        const d = c.getAttribute("data-" + p + "-target");
        const e = b("[data-" + p + '-id="' + d + '"]');
        b[p].lookup[e.data(p)].open();
      }),
        b(document)
          .find("." + q)
          .each(function (a, c) {
            const d = b(c);
            let e = d.data(p + "-options");
            e ? (typeof e === "string" || e instanceof String) && (e = j(e)) : (e = {}), d[p](e);
          }),
        b(document).on("keydown." + q, function (a) {
          n && n.settings.closeOnEscape && n.state === u.OPENED && a.keyCode === 27 && n.close();
        }),
        b(window).on("hashchange." + q, l);
    });
});
